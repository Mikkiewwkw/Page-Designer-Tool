{"ast":null,"code":"import _slicedToArray from \"/Users/kaiweiwu/Documents/page_designer/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/kaiweiwu/Documents/page_designer/client/src/Dropzone.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { useDropzone } from \"react-dropzone\";\nimport { ListGroup, ListGroupItem, Button, ProgressBar } from \"react-bootstrap\";\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport axios from \"axios\";\nimport uniqueId from \"lodash/uniqueId\"; // async function getPresignedUploadUrl(bucketName, key) {\n//     const url = await s3\n//         .getSignedUrl(\"putObject\", {\n//             Bucket: bucketName,\n//             Key: key,\n//             ContentType: \"image/*\",\n//             Expires: 300\n//         })\n//         .promise();\n//     return url;\n// }\n\nconst getColor = props => {\n  if (props.isDragAccept) {\n    return \"#00e676\";\n  }\n\n  if (props.isDragReject) {\n    return \"#ff1744\";\n  }\n\n  if (props.isDragActive) {\n    return \"#2196f3\";\n  }\n\n  return \"#eeeeee\";\n};\n\nconst thumbsContainer = {\n  display: \"flex\",\n  flexDirection: \"row\",\n  flexWrap: \"wrap\",\n  marginTop: 16\n};\nconst thumb = {\n  display: \"inline-flex\",\n  borderRadius: 2,\n  border: \"1px solid #eaeaea\",\n  marginBottom: 8,\n  marginRight: 8,\n  width: 100,\n  height: 100,\n  padding: 4,\n  boxSizing: \"border-box\"\n};\nconst thumbInner = {\n  display: \"flex\",\n  minWidth: 0,\n  overflow: \"hidden\"\n};\nconst img = {\n  display: \"block\",\n  width: \"auto\",\n  height: \"100%\"\n};\n\nfunction Dropzone(props) {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        files = _useState2[0],\n        setFiles = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        showRemove = _useState4[0],\n        setShowRemove = _useState4[1];\n\n  const _useState5 = useState(0),\n        _useState6 = _slicedToArray(_useState5, 2),\n        loaded = _useState6[0],\n        setLoaded = _useState6[1];\n\n  const _useDropzone = useDropzone({\n    multiple: true,\n    accept: \"image/*\",\n    onDrop: acceptedFiles => {\n      console.log(acceptedFiles);\n      setFiles(acceptedFiles.map(file => Object.assign(file, {\n        preview: URL.createObjectURL(file)\n      })));\n      setShowRemove(true);\n    }\n  }),\n        getRootProps = _useDropzone.getRootProps,\n        getInputProps = _useDropzone.getInputProps,\n        isDragActive = _useDropzone.isDragActive,\n        isDragReject = _useDropzone.isDragReject; //with inner or not? inner will shrink the size\n\n\n  const thumbs = React.createElement(\"div\", {\n    style: thumbsContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, files.map(file => React.createElement(CSSTransition, {\n    key: file.path,\n    timeout: 500,\n    classNames: \"item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: thumb,\n    key: file.name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: thumbInner,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: file.preview,\n    alt: \"\",\n    style: img,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  })))))); // const thumbs = files.map(file => (\n  //     <div style={thumb} key={file.name}>\n  //         <img src={file.preview} style={img} />\n  //     </div>\n  // ));\n\n  const removefile = name => () => {\n    console.log(\"hi there\");\n    const newFiles = files.filter(item => item.name !== name);\n    setFiles(newFiles);\n\n    if (newFiles.length === 0) {\n      setShowRemove(false);\n    }\n  };\n\n  const removeAll = () => {\n    setFiles([]);\n    setShowRemove(false);\n  }; // var prefix = props.prefix;\n  // console.log(typeof prefix);\n  // prefix = prefix.substring(0, prefix.length - 1);\n  // console.log(\"what is \", prefix);\n\n\n  const uploadLogo = () => {\n    const length = files.length;\n\n    for (let i = 0; i < length; i++) {\n      const formData = new FormData(); //     console.log(\"look at me\");\n      //     formData.append(files[i].name, files[i]);\n      // }\n\n      formData.append(\"file\", files[i]);\n      console.log(formData);\n      axios.post(\"/image-upload\", formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        },\n        onUploadProgress: function (ProgressEvent) {\n          setLoaded(ProgressEvent.loaded / ProgressEvent.total * 100);\n        }\n      }).then(response => {\n        // handle your response;\n        console.log(\"Get the response\");\n        console.log(response);\n        setShowRemove(false);\n        setFiles([]);\n      }).catch(error => {\n        // handle your error\n        console.log(error);\n      });\n    }\n  };\n\n  useEffect(() => () => {\n    // Make sure to revoke the data uris to avoid memory leaks\n    files.forEach(file => URL.revokeObjectURL(file.preview));\n  }, [files]);\n  const acceptedFilesItems = React.createElement(ListGroup, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }, files.map(file => React.createElement(ListGroupItem, {\n    key: uniqueId(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }, file.path, \" - \", file.size, \" bytes\", \" \", React.createElement(Button, {\n    size: \"sm\",\n    className: \"remove-btn\",\n    \"aria-label\": \"Close\",\n    variant: \"danger\",\n    onClick: removefile(file.name),\n    value: file.name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  }, \"\\xD7\")))); // <em>(Only *.jpeg and *.png images will be accepted)</em>);\n\n  const dragInActiveText = React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195\n    },\n    __self: this\n  }, \"Drag and drop some files here, or click to select files\"), React.createElement(\"em\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }, \"(Only *.jpeg and *.png images will be accepted)\"));\n  const dragActiveText = React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }, \"Drop it like hot\");\n  const dragRejecttedText = React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  }, \"File type not accepted\");\n  return React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203\n    },\n    __self: this\n  }, React.createElement(\"div\", Object.assign({}, getRootProps({\n    className: \"dropzone\"\n  }), {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204\n    },\n    __self: this\n  }), React.createElement(\"input\", Object.assign({}, getInputProps(), {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209\n    },\n    __self: this\n  })), !isDragActive && dragInActiveText, isDragActive && !isDragReject && dragActiveText, isDragReject && dragRejecttedText), files.length > 0 && React.createElement(ProgressBar, {\n    active: true,\n    now: loaded,\n    label: \"\".concat(loaded, \"%\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215\n    },\n    __self: this\n  }), React.createElement(\"aside\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217\n    },\n    __self: this\n  }, thumbs, acceptedFilesItems), showRemove && React.createElement(Button, {\n    variant: \"danger\",\n    className: \"remove-btn\",\n    onClick: removeAll,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222\n    },\n    __self: this\n  }, \"Remove All\"), files.length > 0 && React.createElement(Button, {\n    className: \"save-btn pull-right\",\n    onClick: uploadLogo,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231\n    },\n    __self: this\n  }, \"Save\"));\n}\n\nexport default Dropzone;","map":{"version":3,"sources":["/Users/kaiweiwu/Documents/page_designer/client/src/Dropzone.js"],"names":["React","useEffect","useState","useDropzone","ListGroup","ListGroupItem","Button","ProgressBar","CSSTransition","TransitionGroup","ToastContainer","toast","axios","uniqueId","getColor","props","isDragAccept","isDragReject","isDragActive","thumbsContainer","display","flexDirection","flexWrap","marginTop","thumb","borderRadius","border","marginBottom","marginRight","width","height","padding","boxSizing","thumbInner","minWidth","overflow","img","Dropzone","files","setFiles","showRemove","setShowRemove","loaded","setLoaded","multiple","accept","onDrop","acceptedFiles","console","log","map","file","Object","assign","preview","URL","createObjectURL","getRootProps","getInputProps","thumbs","path","name","removefile","newFiles","filter","item","length","removeAll","uploadLogo","i","formData","FormData","append","post","headers","onUploadProgress","ProgressEvent","total","then","response","catch","error","forEach","revokeObjectURL","acceptedFilesItems","size","dragInActiveText","dragActiveText","dragRejecttedText","className"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useDropzone } from \"react-dropzone\";\nimport { ListGroup, ListGroupItem, Button, ProgressBar } from \"react-bootstrap\";\nimport { CSSTransition, TransitionGroup } from \"react-transition-group\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport axios from \"axios\";\nimport uniqueId from \"lodash/uniqueId\";\n\n// async function getPresignedUploadUrl(bucketName, key) {\n//     const url = await s3\n//         .getSignedUrl(\"putObject\", {\n//             Bucket: bucketName,\n//             Key: key,\n//             ContentType: \"image/*\",\n//             Expires: 300\n//         })\n//         .promise();\n//     return url;\n// }\n\nconst getColor = props => {\n    if (props.isDragAccept) {\n        return \"#00e676\";\n    }\n    if (props.isDragReject) {\n        return \"#ff1744\";\n    }\n    if (props.isDragActive) {\n        return \"#2196f3\";\n    }\n    return \"#eeeeee\";\n};\n\nconst thumbsContainer = {\n    display: \"flex\",\n    flexDirection: \"row\",\n    flexWrap: \"wrap\",\n    marginTop: 16\n};\n\nconst thumb = {\n    display: \"inline-flex\",\n    borderRadius: 2,\n    border: \"1px solid #eaeaea\",\n    marginBottom: 8,\n    marginRight: 8,\n    width: 100,\n    height: 100,\n    padding: 4,\n    boxSizing: \"border-box\"\n};\n\nconst thumbInner = {\n    display: \"flex\",\n    minWidth: 0,\n    overflow: \"hidden\"\n};\n\nconst img = {\n    display: \"block\",\n    width: \"auto\",\n    height: \"100%\"\n};\n\nfunction Dropzone(props) {\n    const [files, setFiles] = useState([]);\n    const [showRemove, setShowRemove] = useState(false);\n    const [loaded, setLoaded] = useState(0);\n    const {\n        getRootProps,\n        getInputProps,\n        isDragActive,\n        isDragReject\n    } = useDropzone({\n        multiple: true,\n        accept: \"image/*\",\n        onDrop: acceptedFiles => {\n            console.log(acceptedFiles);\n            setFiles(\n                acceptedFiles.map(file =>\n                    Object.assign(file, {\n                        preview: URL.createObjectURL(file)\n                    })\n                )\n            );\n            setShowRemove(true);\n        }\n    });\n\n    //with inner or not? inner will shrink the size\n    const thumbs = (\n        <div style={thumbsContainer}>\n            {files.map(file => (\n                <CSSTransition key={file.path} timeout={500} classNames=\"item\">\n                    <div style={thumb} key={file.name}>\n                        <div style={thumbInner}>\n                            <img src={file.preview} alt=\"\" style={img} />\n                        </div>\n                    </div>\n                </CSSTransition>\n            ))}\n        </div>\n    );\n\n    // const thumbs = files.map(file => (\n    //     <div style={thumb} key={file.name}>\n    //         <img src={file.preview} style={img} />\n    //     </div>\n    // ));\n\n    const removefile = name => () => {\n        console.log(\"hi there\");\n        const newFiles = files.filter(item => item.name !== name);\n        setFiles(newFiles);\n        if (newFiles.length === 0) {\n            setShowRemove(false);\n        }\n    };\n\n    const removeAll = () => {\n        setFiles([]);\n        setShowRemove(false);\n    };\n    // var prefix = props.prefix;\n    // console.log(typeof prefix);\n    // prefix = prefix.substring(0, prefix.length - 1);\n    // console.log(\"what is \", prefix);\n\n    const uploadLogo = () => {\n        const length = files.length;\n        for (let i = 0; i < length; i++) {\n            const formData = new FormData();\n            //     console.log(\"look at me\");\n            //     formData.append(files[i].name, files[i]);\n            // }\n            formData.append(\"file\", files[i]);\n            console.log(formData);\n            axios\n                .post(`/image-upload`, formData, {\n                    headers: {\n                        \"Content-Type\": \"multipart/form-data\"\n                    },\n                    onUploadProgress: function(ProgressEvent) {\n                        setLoaded(\n                            (ProgressEvent.loaded / ProgressEvent.total) * 100\n                        );\n                    }\n                })\n                .then(response => {\n                    // handle your response;\n                    console.log(\"Get the response\");\n                    console.log(response);\n                    setShowRemove(false);\n                    setFiles([]);\n                })\n                .catch(error => {\n                    // handle your error\n                    console.log(error);\n                });\n        }\n    };\n\n    useEffect(\n        () => () => {\n            // Make sure to revoke the data uris to avoid memory leaks\n            files.forEach(file => URL.revokeObjectURL(file.preview));\n        },\n        [files]\n    );\n\n    const acceptedFilesItems = (\n        <ListGroup>\n            {files.map(file => (\n                <ListGroupItem key={uniqueId()}>\n                    {file.path} - {file.size} bytes{\" \"}\n                    <Button\n                        size=\"sm\"\n                        className=\"remove-btn\"\n                        aria-label=\"Close\"\n                        variant=\"danger\"\n                        onClick={removefile(file.name)}\n                        value={file.name}\n                    >\n                        &times;\n                    </Button>\n                </ListGroupItem>\n            ))}\n        </ListGroup>\n    );\n\n    // <em>(Only *.jpeg and *.png images will be accepted)</em>);\n    const dragInActiveText = (\n        <React.Fragment>\n            <p>Drag and drop some files here, or click to select files</p>\n            <em>(Only *.jpeg and *.png images will be accepted)</em>\n        </React.Fragment>\n    );\n    const dragActiveText = <p>Drop it like hot</p>;\n    const dragRejecttedText = <p>File type not accepted</p>;\n\n    return (\n        <div className=\"container\">\n            <div\n                {...getRootProps({\n                    className: \"dropzone\"\n                })}\n            >\n                <input {...getInputProps()} />\n                {!isDragActive && dragInActiveText}\n                {isDragActive && !isDragReject && dragActiveText}\n                {isDragReject && dragRejecttedText}\n            </div>\n            {files.length > 0 && (\n                <ProgressBar active now={loaded} label={`${loaded}%`} />\n            )}\n            <aside>\n                {thumbs}\n                {acceptedFilesItems}\n            </aside>\n            {showRemove && (\n                <Button\n                    variant=\"danger\"\n                    className=\"remove-btn\"\n                    onClick={removeAll}\n                >\n                    Remove All\n                </Button>\n            )}\n            {files.length > 0 && (\n                <Button className=\"save-btn pull-right\" onClick={uploadLogo}>\n                    Save\n                </Button>\n            )}\n        </div>\n    );\n}\n\nexport default Dropzone;\n"]},"metadata":{},"sourceType":"module"}